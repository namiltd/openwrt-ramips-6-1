--- a/include/linux/irq.h
+++ b/include/linux/irq.h
@@ -1267,6 +1267,9 @@ static inline u32 irq_reg_readl(struct i
 		return readl(gc->reg_base + reg_offset);
 }
 
+int get_c0_perfcount_int(void);
+unsigned int get_c0_compare_int(void);
+
 struct irq_matrix;
 struct irq_matrix *irq_alloc_matrix(unsigned int matrix_bits,
 				    unsigned int alloc_start,
--- a/arch/mips/include/asm/switch_to.h	2024-09-30 00:06:19.000000000 +0200
+++ b/arch/mips/include/asm/switch_to.h	2024-10-03 23:23:27.305376400 +0200
@@ -111,7 +111,7 @@
 	__mips_mt_fpaff_switch_to(prev);				\
 	lose_fpu_inatomic(1, prev);					\
 	if (tsk_used_math(next))					\
-		__sanitize_fcr31(next);					\
+		{ __sanitize_fcr31(next); }				\
 	if (cpu_has_dsp) {						\
 		__save_dsp(prev);					\
 		__restore_dsp(next);					\
